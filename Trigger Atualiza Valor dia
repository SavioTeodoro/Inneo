CREATE OR REPLACE TRIGGER "GRUPOSOULTST"."AD_TRG_UP_TCSCON_VLRDIA" 
BEFORE UPDATE OR INSERT ON TCSCON
FOR EACH ROW
DECLARE
    V_NUMCONTRATO NUMBER;
    V_DTIN DATE;
    V_DTFIN DATE;
    V_VLRLANC FLOAT;
    V_VLRLANCDIA FLOAT;
BEGIN
    -- Armazena o valor do campo numero em uma vari√°vel local
    V_NUMCONTRATO := :NEW.NUMCONTRATO;    
    V_DTIN := :NEW.AD_DTIN;
    V_DTFIN := :NEW.AD_DTFIN;
    V_VLRLANC := :NEW.AD_VLRCONTRATO;

    IF V_DTFIN <> :OLD.AD_DTFIN OR V_DTIN <> :OLD.AD_DTIN THEN
        :NEW.AD_VLRCONTRATODIA := ROUND((V_VLRLANC / ((V_DTFIN - V_DTIN)+1)), 2);
    END IF;
END;

/
